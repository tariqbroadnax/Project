package Editor;

import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.AbstractListModel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JToolBar;

import Editor.tile.OpenTileset;
import Editor.tile.TileSelector;
import Tileset.Tileset;

public class Selector extends JPanel
{	
	private JList<Tileset> list;
	
	private TileSelector selector;

	public Selector(EditorResources resources)
	{
		JToolBar toolbar = new JToolBar();
		
		selector = new TileSelector();
		
		list = new JList<Tileset>();

		toolbar.add(new OpenTileset(selector));
		
		MyModel model = new MyModel();
		
		list.setModel(model);
		
		Dimension prefSize = new Dimension(200, 600);
		
		setLayout(new GridBagLayout());
		
		GridBagConstraints gbc = new GridBagConstraints();

		gbc.gridx = 0; gbc.gridy = 0;
		gbc.weightx = 1; gbc.weighty = 0;
		gbc.fill = gbc.NONE;
		gbc.anchor = gbc.LINE_START;
		
		add(toolbar, gbc);
		
		gbc.gridx = 0; gbc.gridy = 1;
		gbc.weightx = 1; gbc.weighty = 1;
		gbc.fill = gbc.BOTH;
		gbc.anchor = gbc.LINE_START;
		
		add(list, gbc);
		
		gbc.gridx = 0; gbc.gridy = 2;
		gbc.weightx = 1; gbc.weighty = 1;
		gbc.fill = gbc.BOTH;
		gbc.anchor = gbc.LINE_START;
		
		add(selector, gbc);
			
		setPreferredSize(prefSize);
	}

	private class MyModel extends AbstractListModel<Tileset>
	{
		@Override
		public Tileset getElementAt(int index) 
		{
			return Editor.RESOURCES.getEditorAssets()
			   					   .getTilesets()
			   					   .get(index);
		}

		@Override
		public int getSize() 
		{
			return Editor.RESOURCES.getEditorAssets()
								   .getTilesets()
								   .size();
		}	
	}
}
