package Actions;

import java.awt.geom.Point2D;
import java.time.Duration;

import Entity.Entity;
import Movement.MovementComponent;
import Movement.TargetForce;

public class Move extends Action
{
	private Entity ent;
	
	private TargetForce force;
	
	public Move(Entity ent, Point2D.Double target, 
			    double speed)
	{
		this.ent = ent;
	
		Point2D.Double src = ent.getLoc();
		
		force = new TargetForce(src, target, speed);
	
		ent.get(MovementComponent.class)
		   .getMovement()
		   .add(force);
	}

	@Override
	protected void _update(Duration delta) 
	{
		Point2D.Double src = ent.getLoc();
	
		force.setSrc(src);
	}

	@Override
	protected boolean _isFinished() 
	{
		Point2D.Double src = force.getSrc(),
					   target = force.getTarget();
		
		return src.x == target.x &&
			   src.y == target.y;
	}
}
