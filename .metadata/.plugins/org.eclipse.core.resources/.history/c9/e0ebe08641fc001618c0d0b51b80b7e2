package Tileset;

import java.io.File;
import java.io.Serializable;

import Graphic.ImagePool;

public class Tile implements Serializable
{	
	public final Tileset src;

	public final int row, col;
	
	public Tile(Tileset src, int row, int col)
	{
		this.src = src;
		this.row = row; this.col = col;
	}
	
	@Override
	public boolean equals(Object o)
	{
		if(o instanceof Tile)
		{
			Tile tile = (Tile)o;
			
			String path = src.getFile()
						     .getAbsolutePath(),
				   path2 = tile.src.getFile()
				   				   .getAbsolutePath();
			
			
			return path.equals(path2) &&
				   row == tile.row && col == tile.col;
		}
		
		return false;
	}
	
	@Override
	public int hashCode()
	{
		return src.getFile()
				  .getAbsolutePath()
				  .hashCode();
	}
	
	@Override
	public String toString()
	{
		return "[" + src.getFile().getName() + ", r = " + row + ", col = " + col + "]";
	}
	
	@Override
	protected void finalize() throws Throwable
	{
		ImagePool.instance.release(file);
		
		super.finalize();
	}
}
